Index: public/javascripts/gestionedati.js
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- public/javascripts/gestionedati.js	(date 1563987320312)
+++ public/javascripts/gestionedati.js	(date 1563987320312)
@@ -0,0 +1,19 @@
+(function () {
+
+    var mainview = {};
+    var maincontrol = {};
+
+    $("#trubb").on('click', function () {
+        maincontrol.ciao();
+    });
+
+    maincontrol.ciao = function(){
+      $("#alert").show();
+    };
+
+    $(document).ready(function () {
+        $("#trubb").on('click', function () {
+            maincontrol.ciao();
+        });
+    })
+});
\ No newline at end of file
Index: views/partials/GestioneMoneyGO/gestione-profilo.ejs
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+> <div class=\"row\">\r\n        <div class=\"col-12 col-lg-6 mb-2\">\r\n            <div class=\"card shadow\">\r\n                <h1 class=\"text-center card-header\">Modifica dati </h1>\r\n                <div class=\"card-body\">\r\n                    <div class = \"row\">\r\n                        <div class =\"col-12 col-md-3\">\r\n                            <div class=\"email\" id=\"email\"><h5><b>Email</b></h5></div>\r\n                        </div>\r\n                        <div class =\"col-12 col-md-6\">\r\n                            <div class=\"email\" id=\"email\"><h5><%= user.email%></h5></div>\r\n                        </div>\r\n                        <div class =\"col-12 col-md-3\">\r\n                            <a href=\"modifica-email.ejs\"><u><font size=\"4.5\" color=\"blue\">Modifica</font></u></a>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class = \"row\">\r\n                        <div class =\"col-12 col-md-3\">\r\n                            <div class=\"telefono\" id=\"telefono\"><h5><b>Telefono</b></h5></div>\r\n                        </div>\r\n                        <div class =\"col-12 col-md-4\">\r\n                            <div class=\"telefono\" id=\"telefono\"><h5><%= user.telefono%></h5></div>\r\n                        </div>\r\n                        <div class =\"col-12 col-md-4 offset-md-1\">\r\n                            <u href=\"\"><font size=\"4.5\" color=\"blue\">Modifica</font></u>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <div class=\"col-12 col-lg-6\">\r\n            <div class=\"card shadow  mb-2\">\r\n                <h1 class=\"text-center card-header\">Impostazioni Utili</h1>\r\n                <div class=\"card-body\">\r\n                    <div class = \"row\">\r\n                        <div class =\"col-12 col-md-4\">\r\n                            <div class=\"limite\" id=\"limite\"><h5><b>Limite di pagamento</b></h5></div>\r\n                        </div>\r\n                        <div class =\"col-12 col-md-5\">\r\n                            <div class=\"limite\" id=\"limite\"><h5><%= user.email%></h5></div>\r\n                        </div>\r\n                        <div class =\"col-12 col-md-3 \">\r\n                            <u href=\"\"><font size=\"4.5\" color=\"blue\">Modifica</font></u>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class = \"row\">\r\n                        <div class =\"col-12 col-md-4\">\r\n                            <div class=\"AlertFd\" id=\"AlertFd\"><h5><b>Alert mancanza fondi</b></h5></div>\r\n                        </div>\r\n                        <div class =\"col-12 offset-md-5 col-md-2\">\r\n                            <div class = \"AlertFd\" id = \"AlertFd\"><u><font size=\"4.5\" color=\"blue\"> Attiva</font></u></div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class = \"row\">\r\n                        <div class =\"col-12 col-md-4\">\r\n                            <div class=\"AlertLs\" id=\"AlertLs\"><h5><b>Alert limite spesa</b></h5></div>\r\n                        </div>\r\n                        <div class =\"col-12 offset-md-5 col-md-2\">\r\n                            <div class = \"AlertLs\" id = \"AlertLs\"><u><font size=\"4.5\" color=\"blue\"> Attiva</font></u></div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class = \"row\">\r\n                        <div class =\"col-12 col-md-4\">\r\n                            <div class=\"limite\" id=\"limite\"><h5><b>Comunicazione predefinita</b></h5></div>\r\n                        </div>\r\n                        <div class =\"col-12 col-md-5\">\r\n                            <div class=\"limite\" id=\"limite\"><h5><%= user.email%></h5></div>\r\n                        </div>\r\n                        <div class =\"col-12 col-md-3 \">\r\n                            <u href=\"\"><font size=\"4.5\" color=\"blue\">Modifica</font></u>\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- views/partials/GestioneMoneyGO/gestione-profilo.ejs	(date 1563974876000)
+++ views/partials/GestioneMoneyGO/gestione-profilo.ejs	(date 1563986883618)
@@ -11,7 +11,7 @@
                             <div class="email" id="email"><h5><%= user.email%></h5></div>
                         </div>
                         <div class ="col-12 col-md-3">
-                            <a href="modifica-email.ejs"><u><font size="4.5" color="blue">Modifica</font></u></a>
+                            <button id="trubb"><u><font size="4.5" color="blue">Modifica</font></u></button>
                         </div>
                     </div>
 
Index: access.log
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- access.log	(date 1563974876000)
+++ access.log	(date 1563987350711)
@@ -23540,3 +23540,236 @@
 ::ffff:127.0.0.1 - - [24/Jul/2019:13:24:51 +0000] "GET /stylesheets/schermata.css HTTP/1.1" 200 916
 ::ffff:127.0.0.1 - - [24/Jul/2019:13:24:51 +0000] "GET /javascripts/js/bootstrap.js HTTP/1.1" 304 -
 ::ffff:127.0.0.1 - - [24/Jul/2019:13:24:51 +0000] "GET /stylesheets/css/bootstrap.min.css.map HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:13:33:30 +0000] "GET / HTTP/1.1" 200 6401
+::ffff:127.0.0.1 - - [24/Jul/2019:13:33:30 +0000] "GET /stylesheets/css/bootstrap.min.css HTTP/1.1" 200 155758
+::ffff:127.0.0.1 - - [24/Jul/2019:13:33:30 +0000] "GET /stylesheets/style.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:13:33:30 +0000] "GET /images/slide1.jpg HTTP/1.1" 200 14746
+::ffff:127.0.0.1 - - [24/Jul/2019:13:33:30 +0000] "GET /images/slide2.jpg HTTP/1.1" 200 245784
+::ffff:127.0.0.1 - - [24/Jul/2019:13:33:30 +0000] "GET /images/passdimenticata.jpg HTTP/1.1" 200 13284
+::ffff:127.0.0.1 - - [24/Jul/2019:13:33:30 +0000] "GET /javascripts/js/bootstrap.js HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:13:33:30 +0000] "GET /images/slide3.jpg HTTP/1.1" 200 209849
+::ffff:127.0.0.1 - - [24/Jul/2019:13:33:30 +0000] "GET /javascripts/login.js HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:13:33:36 +0000] "POST /login HTTP/1.1" 200 5
+::ffff:127.0.0.1 - - [24/Jul/2019:13:33:36 +0000] "GET /home HTTP/1.1" 200 6775
+::ffff:127.0.0.1 - - [24/Jul/2019:13:33:36 +0000] "GET /stylesheets/css/bootstrap.min.css HTTP/1.1" 200 155758
+::ffff:127.0.0.1 - - [24/Jul/2019:13:33:36 +0000] "GET /stylesheets/style.css HTTP/1.1" 200 1935
+::ffff:127.0.0.1 - - [24/Jul/2019:13:33:36 +0000] "GET /stylesheets/schermata.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:13:33:36 +0000] "GET /javascripts/js/bootstrap.js HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:13:33:36 +0000] "GET /javascripts/home.js HTTP/1.1" 200 909
+::ffff:127.0.0.1 - - [24/Jul/2019:13:33:37 +0000] "GET /home/adminCards HTTP/1.1" 200 9992
+::ffff:127.0.0.1 - - [24/Jul/2019:13:33:37 +0000] "GET /stylesheets/style.css HTTP/1.1" 200 1935
+::ffff:127.0.0.1 - - [24/Jul/2019:13:33:37 +0000] "GET /stylesheets/css/bootstrap.min.css HTTP/1.1" 200 155758
+::ffff:127.0.0.1 - - [24/Jul/2019:13:33:37 +0000] "GET /stylesheets/schermata.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:13:33:37 +0000] "GET /javascripts/js/bootstrap.js HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:13:33:37 +0000] "GET /javascripts/gestionecarte.js HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:13:33:37 +0000] "GET /home/images/favicon.ico HTTP/1.1" - -
+::ffff:127.0.0.1 - - [24/Jul/2019:13:33:37 +0000] "GET /home/adminCards/ricavaMetodi HTTP/1.1" 200 132
+::ffff:127.0.0.1 - - [24/Jul/2019:13:33:50 +0000] "GET / HTTP/1.1" 302 54
+::ffff:127.0.0.1 - - [24/Jul/2019:13:33:50 +0000] "GET /home HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:13:33:50 +0000] "GET /stylesheets/css/bootstrap.min.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:13:33:50 +0000] "GET /stylesheets/style.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:13:33:50 +0000] "GET /stylesheets/schermata.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:13:33:50 +0000] "GET /javascripts/js/bootstrap.js HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:13:33:50 +0000] "GET /javascripts/home.js HTTP/1.1" 200 909
+::ffff:127.0.0.1 - - [24/Jul/2019:13:33:57 +0000] "GET /home/adminCards HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:13:33:57 +0000] "GET /stylesheets/css/bootstrap.min.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:13:33:57 +0000] "GET /stylesheets/style.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:13:33:57 +0000] "GET /stylesheets/schermata.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:13:33:57 +0000] "GET /javascripts/js/bootstrap.js HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:13:33:57 +0000] "GET /javascripts/gestionecarte.js HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:13:33:57 +0000] "GET /home/adminCards/ricavaMetodi HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:14:25:53 +0000] "GET /home/adminCards HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:14:25:53 +0000] "GET /stylesheets/css/bootstrap.min.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:14:25:53 +0000] "GET /stylesheets/style.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:14:25:53 +0000] "GET /stylesheets/schermata.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:14:25:53 +0000] "GET /javascripts/js/bootstrap.js HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:14:25:53 +0000] "GET /javascripts/gestionecarte.js HTTP/1.1" 200 13605
+::ffff:127.0.0.1 - - [24/Jul/2019:14:25:54 +0000] "GET /home/adminCards/ricavaMetodi HTTP/1.1" 200 132
+::ffff:127.0.0.1 - - [24/Jul/2019:14:26:43 +0000] "GET /stylesheets/css/bootstrap.min.css HTTP/1.1" 200 155758
+::ffff:127.0.0.1 - - [24/Jul/2019:14:26:43 +0000] "GET /stylesheets/style.css HTTP/1.1" 200 1935
+::ffff:127.0.0.1 - - [24/Jul/2019:14:26:43 +0000] "GET /stylesheets/css/bootstrap.min.css.map HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:14:27:30 +0000] "GET /home/adminCards HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:14:27:31 +0000] "GET /stylesheets/css/bootstrap.min.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:14:27:31 +0000] "GET /stylesheets/style.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:14:27:31 +0000] "GET /stylesheets/schermata.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:14:27:31 +0000] "GET /javascripts/js/bootstrap.js HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:14:27:31 +0000] "GET /javascripts/gestionecarte.js HTTP/1.1" 200 13656
+::ffff:127.0.0.1 - - [24/Jul/2019:14:27:31 +0000] "GET /home/adminCards/ricavaMetodi HTTP/1.1" 200 132
+::ffff:127.0.0.1 - - [24/Jul/2019:14:27:31 +0000] "GET /stylesheets/css/bootstrap.min.css.map HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:14:27:43 +0000] "POST /home/adminCards/aggiungiMetodoConto HTTP/1.1" 404 1033
+::ffff:127.0.0.1 - - [24/Jul/2019:14:28:01 +0000] "GET /home/adminCards HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:14:28:01 +0000] "GET /stylesheets/css/bootstrap.min.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:14:28:01 +0000] "GET /stylesheets/style.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:14:28:01 +0000] "GET /stylesheets/schermata.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:14:28:01 +0000] "GET /javascripts/js/bootstrap.js HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:14:28:01 +0000] "GET /javascripts/gestionecarte.js HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:14:28:01 +0000] "GET /home/adminCards/ricavaMetodi HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:14:31:33 +0000] "GET /stylesheets/css/bootstrap.min.css.map HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:14:33:19 +0000] "GET /home/adminCards HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:14:33:19 +0000] "GET /stylesheets/css/bootstrap.min.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:14:33:19 +0000] "GET /stylesheets/style.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:14:33:19 +0000] "GET /stylesheets/schermata.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:14:33:19 +0000] "GET /javascripts/js/bootstrap.js HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:14:33:19 +0000] "GET /javascripts/gestionecarte.js HTTP/1.1" 200 13812
+::ffff:127.0.0.1 - - [24/Jul/2019:14:33:19 +0000] "GET /home/adminCards/ricavaMetodi HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:14:33:19 +0000] "GET /stylesheets/css/bootstrap.min.css.map HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:14:34:20 +0000] "GET /home/adminCards HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:14:34:20 +0000] "GET /stylesheets/css/bootstrap.min.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:14:34:20 +0000] "GET /stylesheets/style.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:14:34:20 +0000] "GET /stylesheets/schermata.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:14:34:20 +0000] "GET /javascripts/js/bootstrap.js HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:14:34:20 +0000] "GET /javascripts/gestionecarte.js HTTP/1.1" 200 13761
+::ffff:127.0.0.1 - - [24/Jul/2019:14:34:20 +0000] "GET /home/adminCards/ricavaMetodi HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:14:34:20 +0000] "GET /stylesheets/css/bootstrap.min.css.map HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:14:36:20 +0000] "GET /home/adminCards HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:14:36:20 +0000] "GET /stylesheets/css/bootstrap.min.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:14:36:20 +0000] "GET /stylesheets/style.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:14:36:20 +0000] "GET /stylesheets/schermata.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:14:36:20 +0000] "GET /javascripts/js/bootstrap.js HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:14:36:20 +0000] "GET /javascripts/gestionecarte.js HTTP/1.1" 200 13813
+::ffff:127.0.0.1 - - [24/Jul/2019:14:36:20 +0000] "GET /home/adminCards/ricavaMetodi HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:14:36:20 +0000] "GET /stylesheets/css/bootstrap.min.css.map HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:15:11:06 +0000] "GET /home/adminCards HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:15:11:06 +0000] "GET /stylesheets/css/bootstrap.min.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:15:11:06 +0000] "GET /stylesheets/style.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:15:11:06 +0000] "GET /stylesheets/schermata.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:15:11:06 +0000] "GET /javascripts/js/bootstrap.js HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:15:11:06 +0000] "GET /javascripts/gestionecarte.js HTTP/1.1" 200 13867
+::ffff:127.0.0.1 - - [24/Jul/2019:15:11:06 +0000] "GET /home/adminCards/ricavaMetodi HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:15:11:07 +0000] "GET /stylesheets/css/bootstrap.min.css.map HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:15:21:57 +0000] "GET /home/adminCards HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:15:21:57 +0000] "GET /stylesheets/css/bootstrap.min.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:15:21:57 +0000] "GET /stylesheets/style.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:15:21:57 +0000] "GET /stylesheets/schermata.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:15:21:57 +0000] "GET /javascripts/js/bootstrap.js HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:15:21:57 +0000] "GET /javascripts/gestionecarte.js HTTP/1.1" 200 13816
+::ffff:127.0.0.1 - - [24/Jul/2019:15:21:57 +0000] "GET /home/adminCards/ricavaMetodi HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:15:21:57 +0000] "GET /stylesheets/css/bootstrap.min.css.map HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:15:46:26 +0000] "GET /home/adminCards HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:15:46:26 +0000] "GET /stylesheets/css/bootstrap.min.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:15:46:26 +0000] "GET /stylesheets/style.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:15:46:26 +0000] "GET /stylesheets/schermata.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:15:46:26 +0000] "GET /javascripts/js/bootstrap.js HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:15:46:27 +0000] "GET /javascripts/gestionecarte.js HTTP/1.1" 200 13908
+::ffff:127.0.0.1 - - [24/Jul/2019:15:46:27 +0000] "GET /home/adminCards/ricavaMetodi HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:15:46:27 +0000] "GET /stylesheets/css/bootstrap.min.css.map HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:15:57:08 +0000] "GET /home/adminCards HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:15:57:08 +0000] "GET /stylesheets/css/bootstrap.min.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:15:57:08 +0000] "GET /stylesheets/style.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:15:57:08 +0000] "GET /stylesheets/schermata.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:15:57:08 +0000] "GET /javascripts/js/bootstrap.js HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:15:57:08 +0000] "GET /javascripts/gestionecarte.js HTTP/1.1" 200 14736
+::ffff:127.0.0.1 - - [24/Jul/2019:15:57:08 +0000] "GET /home/adminCards/ricavaMetodi HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:15:57:08 +0000] "GET /stylesheets/css/bootstrap.min.css.map HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:15:57:43 +0000] "POST /home/adminCards/aggiungiMetodoConto HTTP/1.1" 404 1033
+::ffff:127.0.0.1 - - [24/Jul/2019:15:57:46 +0000] "GET /home/adminCards HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:15:57:46 +0000] "GET /stylesheets/css/bootstrap.min.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:15:57:46 +0000] "GET /stylesheets/style.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:15:57:46 +0000] "GET /stylesheets/schermata.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:15:57:46 +0000] "GET /javascripts/js/bootstrap.js HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:15:57:46 +0000] "GET /javascripts/gestionecarte.js HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:15:57:47 +0000] "GET /home/adminCards/ricavaMetodi HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:15:57:47 +0000] "GET /stylesheets/css/bootstrap.min.css.map HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:43:41 +0000] "GET / HTTP/1.1" 302 54
+::ffff:127.0.0.1 - - [24/Jul/2019:16:43:41 +0000] "GET /home HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:43:41 +0000] "GET /stylesheets/css/bootstrap.min.css HTTP/1.1" 200 155758
+::ffff:127.0.0.1 - - [24/Jul/2019:16:43:41 +0000] "GET /stylesheets/style.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:43:41 +0000] "GET /stylesheets/schermata.css HTTP/1.1" 200 916
+::ffff:127.0.0.1 - - [24/Jul/2019:16:43:41 +0000] "GET /javascripts/js/bootstrap.js HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:43:41 +0000] "GET /javascripts/home.js HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:43:41 +0000] "GET /stylesheets/css/bootstrap.min.css.map HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:43:43 +0000] "GET /home/gestioneProfilo HTTP/1.1" 200 6220
+::ffff:127.0.0.1 - - [24/Jul/2019:16:43:43 +0000] "GET /stylesheets/css/bootstrap.min.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:43:43 +0000] "GET /stylesheets/style.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:43:43 +0000] "GET /stylesheets/schermata.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:43:43 +0000] "GET /javascripts/js/bootstrap.js HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:43:43 +0000] "GET /javascripts/gestionedati.js HTTP/1.1" 200 96
+::ffff:127.0.0.1 - - [24/Jul/2019:16:43:43 +0000] "GET /stylesheets/css/bootstrap.min.css.map HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:43:48 +0000] "GET /home/gestioneProfilo HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:43:48 +0000] "GET /stylesheets/css/bootstrap.min.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:43:48 +0000] "GET /stylesheets/style.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:43:48 +0000] "GET /stylesheets/schermata.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:43:48 +0000] "GET /javascripts/js/bootstrap.js HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:43:48 +0000] "GET /javascripts/gestionedati.js HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:43:48 +0000] "GET /stylesheets/css/bootstrap.min.css.map HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:43:49 +0000] "GET /home/gestioneProfilo HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:43:49 +0000] "GET /stylesheets/css/bootstrap.min.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:43:49 +0000] "GET /stylesheets/style.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:43:49 +0000] "GET /stylesheets/schermata.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:43:49 +0000] "GET /javascripts/js/bootstrap.js HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:43:49 +0000] "GET /javascripts/gestionedati.js HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:43:50 +0000] "GET /stylesheets/css/bootstrap.min.css.map HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:44:18 +0000] "GET /home/modifica-email.ejs HTTP/1.1" 404 1033
+::ffff:127.0.0.1 - - [24/Jul/2019:16:44:18 +0000] "GET /favicon.ico HTTP/1.1" 404 1033
+::ffff:127.0.0.1 - - [24/Jul/2019:16:44:20 +0000] "GET /stylesheets/css/bootstrap.min.css.map HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:46:33 +0000] "GET /home/gestioneProfilo HTTP/1.1" 200 6205
+::ffff:127.0.0.1 - - [24/Jul/2019:16:46:33 +0000] "GET /stylesheets/css/bootstrap.min.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:46:33 +0000] "GET /stylesheets/style.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:46:33 +0000] "GET /stylesheets/schermata.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:46:33 +0000] "GET /javascripts/js/bootstrap.js HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:46:33 +0000] "GET /javascripts/gestionedati.js HTTP/1.1" 200 309
+::ffff:127.0.0.1 - - [24/Jul/2019:16:46:34 +0000] "GET /stylesheets/css/bootstrap.min.css.map HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:47:46 +0000] "GET /home/gestioneProfilo HTTP/1.1" 200 6320
+::ffff:127.0.0.1 - - [24/Jul/2019:16:47:46 +0000] "GET /stylesheets/css/bootstrap.min.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:47:46 +0000] "GET /stylesheets/style.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:47:46 +0000] "GET /stylesheets/schermata.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:47:46 +0000] "GET /javascripts/js/bootstrap.js HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:47:46 +0000] "GET /javascripts/gestionedati.js HTTP/1.1" 200 305
+::ffff:127.0.0.1 - - [24/Jul/2019:16:47:48 +0000] "GET /stylesheets/css/bootstrap.min.css.map HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:48:05 +0000] "GET /home/gestioneProfilo HTTP/1.1" 200 6330
+::ffff:127.0.0.1 - - [24/Jul/2019:16:48:05 +0000] "GET /stylesheets/css/bootstrap.min.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:48:05 +0000] "GET /stylesheets/style.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:48:05 +0000] "GET /stylesheets/schermata.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:48:05 +0000] "GET /javascripts/js/bootstrap.js HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:48:05 +0000] "GET /javascripts/gestionedati.js HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:48:09 +0000] "GET /stylesheets/css/bootstrap.min.css.map HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:48:20 +0000] "GET /javascripts/js/bootstrap.js.map HTTP/1.1" 200 250568
+::ffff:127.0.0.1 - - [24/Jul/2019:16:49:17 +0000] "GET /home/gestioneProfilo HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:49:17 +0000] "GET /stylesheets/css/bootstrap.min.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:49:17 +0000] "GET /stylesheets/style.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:49:17 +0000] "GET /stylesheets/schermata.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:49:17 +0000] "GET /javascripts/js/bootstrap.js HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:49:17 +0000] "GET /javascripts/gestionedati.js HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:49:20 +0000] "GET /javascripts/js/bootstrap.js.map HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:49:20 +0000] "GET /stylesheets/css/bootstrap.min.css.map HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:50:43 +0000] "GET /home/gestioneProfilo HTTP/1.1" 200 6346
+::ffff:127.0.0.1 - - [24/Jul/2019:16:50:43 +0000] "GET /stylesheets/css/bootstrap.min.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:50:43 +0000] "GET /stylesheets/style.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:50:43 +0000] "GET /stylesheets/schermata.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:50:43 +0000] "GET /javascripts/gestionedati.js HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:50:43 +0000] "GET /javascripts/js/bootstrap.js HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:50:43 +0000] "GET /javascripts/js/bootstrap.js.map HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:50:43 +0000] "GET /stylesheets/css/bootstrap.min.css.map HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:50:59 +0000] "GET /home/gestioneProfilo HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:50:59 +0000] "GET /stylesheets/css/bootstrap.min.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:50:59 +0000] "GET /stylesheets/style.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:51:00 +0000] "GET /stylesheets/schermata.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:51:00 +0000] "GET /javascripts/gestionedati.js HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:51:00 +0000] "GET /javascripts/js/bootstrap.js HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:51:00 +0000] "GET /javascripts/js/bootstrap.js.map HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:51:00 +0000] "GET /stylesheets/css/bootstrap.min.css.map HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:53:05 +0000] "GET /home/gestioneProfilo HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:53:05 +0000] "GET /stylesheets/css/bootstrap.min.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:53:05 +0000] "GET /stylesheets/style.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:53:05 +0000] "GET /stylesheets/schermata.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:53:05 +0000] "GET /javascripts/gestionedati.js HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:53:05 +0000] "GET /javascripts/js/bootstrap.js HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:53:05 +0000] "GET /javascripts/js/bootstrap.js.map HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:53:05 +0000] "GET /stylesheets/css/bootstrap.min.css.map HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:55:23 +0000] "GET /home/gestioneProfilo HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:55:23 +0000] "GET /stylesheets/css/bootstrap.min.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:55:23 +0000] "GET /stylesheets/style.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:55:23 +0000] "GET /stylesheets/schermata.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:55:23 +0000] "GET /javascripts/gestionedati.js HTTP/1.1" 200 368
+::ffff:127.0.0.1 - - [24/Jul/2019:16:55:23 +0000] "GET /javascripts/js/bootstrap.js HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:55:23 +0000] "GET /javascripts/js/bootstrap.js.map HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:55:23 +0000] "GET /stylesheets/css/bootstrap.min.css.map HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:55:45 +0000] "GET / HTTP/1.1" 302 54
+::ffff:127.0.0.1 - - [24/Jul/2019:16:55:45 +0000] "GET /home HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:55:45 +0000] "GET /stylesheets/css/bootstrap.min.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:55:45 +0000] "GET /stylesheets/style.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:55:45 +0000] "GET /stylesheets/schermata.css HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:55:45 +0000] "GET /javascripts/js/bootstrap.js HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:55:45 +0000] "GET /javascripts/home.js HTTP/1.1" 200 909
+::ffff:127.0.0.1 - - [24/Jul/2019:16:55:45 +0000] "GET /javascripts/js/bootstrap.js.map HTTP/1.1" 304 -
+::ffff:127.0.0.1 - - [24/Jul/2019:16:55:45 +0000] "GET /stylesheets/css/bootstrap.min.css.map HTTP/1.1" 304 -
Index: views/gestioneprofilo.ejs
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><html lang=\"en\" dir=\"ltr\">\r\n<head>\r\n    <meta charset=\"utf-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>MoneyGo</title>\r\n    <link rel=\"stylesheet\" href=\"/stylesheets/css/bootstrap.min.css\">\r\n    <link rel='shortcut icon' type='image/x-icon' href='images/favicon.ico' />\r\n    <link rel=\"stylesheet\" href=\"/stylesheets/style.css\">\r\n    <link rel=\"stylesheet\" href=\"/stylesheets/schermata.css\">\r\n\r\n    <!-- Font -->\r\n    <link href='https://fonts.googleapis.com/css?family=Didact Gothic' rel='stylesheet'>\r\n</head>\r\n<body class=\"d-flex flex-column\">\r\n\r\n<% include partials/header_postlogin.ejs %>\r\n\r\n<div id=\"page-content\">\r\n    <main class=\"container\">\r\n        <%include partials/GestioneMoneyGO/gestione-profilo.ejs%>\r\n    </main>\r\n</div>\r\n    <% include partials/footer.ejs %>\r\n\r\n<% include ./partials/script.ejs%>\r\n\r\n</body>\r\n</html>\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- views/gestioneprofilo.ejs	(date 1563974876000)
+++ views/gestioneprofilo.ejs	(date 1563987040997)
@@ -18,10 +18,13 @@
 <div id="page-content">
     <main class="container">
         <%include partials/GestioneMoneyGO/gestione-profilo.ejs%>
+        <div class="alert alert-danger text-center" id="alert" role="alert">
+            <p id="alert_text"></p>
+        </div>
     </main>
 </div>
     <% include partials/footer.ejs %>
-
+<script type="text/javascript" src="/javascripts/gestionedati.js"></script>
 <% include ./partials/script.ejs%>
 
 </body>
Index: public/javascripts/gestionecarte.js
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>(function () {\r\n\r\n    var mainview = {};\r\n    var maincontrol = {\r\n        metodi: null,\r\n        banche: null,\r\n        carte: null,\r\n        selected: null,\r\n    };\r\n\r\n    var numero_carta = false;\r\n\r\n    $(\"#buttonONE\").on('click', function(){mainview.mostraFormNuovoMetodo()});\r\n    $(\"#buttonTWO\").on('click', function(e){mainview.premutoRimuovi(e)});\r\n    $(\"#buttonTHREE\").on('click', function(e){maincontrol.impostaPredefinito(e)});\r\n    $(\"#primaryButton\").on('click', function() {mainview.ricaricaPagina()});\r\n    $(\"#confermaButton\").on('click', function() {maincontrol.rimuoviMetodo()});\r\n    $(\"#otherButton\").on('click', function(){mainview.resetModal()});\r\n    $(\"#aggiungiMetodo\").on('click', function () {maincontrol.aggiungiMetodo()});\r\n\r\n\r\n    //Da completare\r\n    mainview.mostraFormNuovoMetodo = function(){\r\n        $(\"#carta-credito\").prop('checked', true);\r\n        mainview.selezionatoCarta();\r\n        $(\"#modalForm\").modal('show');\r\n\r\n    };\r\n\r\n    mainview.selezionatoCarta = function(){\r\n        mainview.attivaCampi();\r\n        $(\"#numConto\").prop('disabled', true);\r\n    };\r\n\r\n    mainview.selezionatoConto = function(){\r\n        mainview.attivaCampi();\r\n        $(\"#cvv\").prop('disabled', true);\r\n        $(\"#scadenza\").prop('disabled', true);\r\n    };\r\n\r\n    mainview.attivaCampi = function(){\r\n        $(\"#aggiungi-metodo input\").prop('disabled', false);\r\n    };\r\n\r\n    //Scorre i metodi di pagamento ed evidenzia quello predefinito\r\n    mainview.evidenziaPredefinito = function(metodi){\r\n        for( let i = 0; i < metodi.length; i++){\r\n            if(metodi[i].predefinito == 1)\r\n                $('#T'+i+'').css(\"background-color\", \"gold\");\r\n        }\r\n    };\r\n\r\n    mainview.ricaricaPagina = function(){\r\n        $(\"#cambioPredefinito\").hide();\r\n        location.reload();\r\n    };\r\n\r\n    //Recupera l'id dell'elemento selezionato dalla listgroup\r\n    maincontrol.getID = function(){\r\n        let storeValue = null;\r\n        $(\".list-group a\").on('click',function () {\r\n          storeValue = ($(this).attr(\"id\"));\r\n            console.log(maincontrol.metodi[storeValue[1]].id_metodo);\r\n           maincontrol.selected =  maincontrol.metodi[storeValue[1]].id_metodo;\r\n        });\r\n\r\n    };\r\n\r\n    mainview.resetModal = function(){\r\n        $(\"#otherButton\").html(\"\").hide();\r\n        $(\"#primaryButton\").html(\"\").hide();\r\n        $(\"#confermaButton\").html(\"\").hide();\r\n        $(\"#modalCarte\").modal('toggle');\r\n    };\r\n\r\n    mainview.modalError = function(){\r\n        $(\".modal-title\").text(\"Attenzione\");\r\n        $(\"#primaryButton\").hide();\r\n        $(\"#otherButton\").html(\"Chiudi\").show();\r\n        $(\"#modalText\").text(\"Si prega di selezionare un metodo di pagamento.\").show();\r\n        $(\"#modalCarte\").modal('show');\r\n    };\r\n\r\n    mainview.premutoRimuovi = function(e){\r\n        e.preventDefault();\r\n        var id = maincontrol.selected;\r\n        console.log(id);\r\n        if(id === null){\r\n            mainview.modalError();\r\n        } else {\r\n            $(\".modal-title\").text(\"Confermare l'operazione\");\r\n            $(\"#primaryButton\").hide();\r\n            $(\"#confermaButton\").html(\"Conferma\").show();\r\n            $(\"#otherButton\").html(\"Annulla\").show();\r\n            $(\"#modalText\").text(\"Sicuro di voler eliminare il metodo di pagamento selezionato?\").show();\r\n            $(\"#modalCarte\").modal('show');\r\n        }\r\n    };\r\n\r\n    mainview.messaggioEsitoOperazione = function(title, msg){\r\n        $(\"#modalCarte\").modal('show');\r\n        $(\".modal-title\").text(title);\r\n        $(\"#modalText\").text(msg).show();\r\n        $(\"#primaryButton\").html(\"Aggiorna\").show();\r\n        $(\"#otherButton\").hide();\r\n        $(\"#confermaButton\").hide();\r\n    };\r\n\r\n    //Invia la richiesta al server per modificare il valore del pagamento predefinito\r\n    maincontrol.impostaPredefinito = function(e){\r\n        e.preventDefault();\r\n        var id = maincontrol.selected;\r\n\r\n        if(id === null){\r\n            mainview.modalError();\r\n        }else {\r\n            $.ajax({\r\n                type: \"POST\",\r\n                url: \"/home/adminCards/impostaPredefinito\",\r\n                data: {id: id},\r\n\r\n                beforeSend: function () {\r\n                    $(\"#modalCarte\").modal('show');\r\n                    $(\"#loading\").show();\r\n                    $(\"#modalText\").hide();\r\n                },\r\n\r\n                success: function (msg) {\r\n                    if (msg === \"DONE\") {\r\n                        $(\"#loading\").hide();\r\n                        $(\".modal-title\").text(\"Operazione effettuata\");\r\n                        $(\"#modalText\").text(\"Il nuovo pagamento predefinito è stato impostato correttamente\").show();\r\n                        $(\"#primaryButton\").html(\"Aggiorna\").show();\r\n\r\n                    } else if (msg === \"ERROR\") {\r\n                        $(\"#loading\").hide();\r\n                        $(\".modal-title\").text(\"Operazione fallita\");\r\n                        $(\"#modalText\").text(\"Ci dispiace, qualcosa è andato storto.\").show();\r\n                        $(\"#primaryButton\").html(\"Aggiorna\").show();\r\n\r\n                    }\r\n                },\r\n\r\n                error: function () {\r\n                    console.log(\"errore nella richiesta\");\r\n                }\r\n            })\r\n        }\r\n    };\r\n\r\n    maincontrol.getMetodi = function(){\r\n        console.log(\"Richiesta dati metodi\");\r\n        $.ajax({\r\n            type: \"GET\",\r\n            url: \"/home/adminCards/ricavaMetodi\",\r\n            //no data\r\n\r\n            success: function (data) {\r\n                maincontrol.metodi = data;\r\n                mainview.evidenziaPredefinito(maincontrol.metodi);\r\n            }\r\n        })\r\n\r\n    };\r\n\r\n    //Invia la richiesta al server per rimuovere il metodo di pagamento selezionato\r\n    maincontrol.rimuoviMetodo = function(){\r\n        var id = maincontrol.selected;\r\n\r\n            $.ajax({\r\n                type: \"POST\",\r\n                url: \"/home/adminCards/rimuoviMetodo\",\r\n                data: {id: id},\r\n\r\n                beforeSend: function () {\r\n                    $(\"#modalCarte\").modal('show');\r\n                    $(\"#loading\").show();\r\n                    $(\"#modalText\").hide();\r\n                },\r\n\r\n                success: function (msg) {\r\n                    if (msg === \"DONE\") {\r\n                        $(\"#loading\").hide();\r\n                        mainview.messaggioEsitoOperazione(\"Metodo di pagamento rimosso con successo.\");\r\n                    } else if (msg === \"ERROR\") {\r\n                        $(\"#loading\").hide();\r\n                        $(\"#modalText\").text(\"Ci dispiace, qualcosa è andato storto\").show();\r\n                    }\r\n                },\r\n\r\n                error: function () {\r\n                    console.log(\"errore nella richiesta\");\r\n                }\r\n\r\n            })\r\n\r\n    };\r\n\r\n    /*Le due maincontrol getCarte e getBanche richiedono al server\r\n     *i dati rispettivamente di carte e banche relative ai metodi del cliente\r\n     */\r\n    maincontrol.getCarte = function(){\r\n        console.log(\"Richiesta dati carte\");\r\n        $.ajax({\r\n            type: \"GET\",\r\n            url: \"/home/adminCards/ricavaCarte\",\r\n            //no data\r\n\r\n            success: function (data) {\r\n                maincontrol.carta = data;\r\n            }\r\n        })\r\n    };\r\n\r\n    maincontrol.getBanche = function(){\r\n        console.log(\"Richiesta dati Banche\");\r\n        $.ajax({\r\n            type: \"GET\",\r\n            url: \"/home/adminCards/ricavaBanche\",\r\n            //no data\r\n\r\n            success: function (data) {\r\n                maincontrol.carta = data;\r\n            }\r\n        })\r\n    };\r\n\r\n    maincontrol.aggiungiMetodo = function(){\r\n        if($(\"#carta-credito\").prop(\"checked\"))\r\n            maincontrol.aggiungiCarta();\r\n        else\r\n            maincontrol.aggiungiBanca();\r\n    };\r\n\r\n    /*\r\n    * La funzione aggiungiCarta verifica che non esista già un metodo\r\n    * associato al numero di carta e successivamente invia la richiesta per\r\n    * l'aggiunzione del nuovo metodo, mostrando i relativi messaggi di\r\n    * conferma o errore.\r\n    * */\r\n    maincontrol.aggiungiCarta = function(){\r\n        console.log(\"Invio richiesta ajax aggiunzione Carta\");\r\n        var numero = $(\"#numeroOiban\").val();\r\n        var cvv = $(\"#cvv\").val();\r\n        var scadenza = $(\"#scandeza\").val();\r\n\r\n        for(let i = 0; i < maincontrol.metodi.length; i++){\r\n          if(!(maincontrol.metodi[i].numero_carta === numero)){\r\n              numero_carta = true;\r\n          }else{\r\n              numero_carta = false;\r\n              break;\r\n          }\r\n        }\r\n        if(numero_carta) {\r\n            $.ajax({\r\n                type: \"POST\",\r\n                url: \"/home/adminCards/aggiungiMetodoCarta\",\r\n                data: {numero: numero, cvv: cvv},\r\n\r\n                beforeSend: function () {\r\n                    $(\"#modalForm\").modal('hide');\r\n                    $(\"#modalCarte\").modal('show');\r\n                    $(\"#loading\").show();\r\n                    $(\"#modalText\").hide();\r\n                },\r\n                success: function (msg) {\r\n                    if (msg === \"DONE\") {\r\n                        $(\"#loading\").hide();\r\n                        mainview.messaggioEsitoOperazione(\"Operazione riuscita\",\"Metodo di pagamento inserito con successo.\");\r\n                    } else if (msg === \"FAULT\") {\r\n                        $(\"#loading\").hide();\r\n                        mainview.messaggioEsitoOperazione(\"Operazione fallita\",\"Numero carta non riscontrato o CVV errato.\");\r\n                    }\r\n                }\r\n            })\r\n        }else{\r\n            $(\"#modalForm\").modal('hide');\r\n            mainview.messaggioEsitoOperazione(\"Operazione fallita\",\"Errore nei dati inseriti o metodo già esistente.\");\r\n        }\r\n\r\n    };\r\n\r\n    maincontrol.aggiungiBanca = function(){\r\n        console.log(\"Invio richiesta ajax aggiunta contoBancario\");\r\n        var iban = $(\"#numeroOiban\").val();\r\n\r\n    };\r\n\r\n    mainview.campiErrati = function () {\r\n        $(\"#alert_text\").text(\"Per favore, ricontrollare i dati\");\r\n        $(\"#alert\").show(\"slow\");\r\n\r\n    };\r\n\r\n    mainview.ripulisciCampiErrati = function(){\r\n        $(\"#alert\").hide(\"fast\");\r\n        $(\"#numeroOiban\").css(\"borderColor\", \"\");\r\n    };\r\n\r\n\r\n    $(document).ready(function () {\r\n        $('#listaMetodi a').on('click', function (e) {\r\n            e.preventDefault();\r\n            mainview.riepilogoDati();\r\n            $(this).tab('show')\r\n\r\n        });\r\n\r\n        $(\"input[name='tipo']\").click(function () {\r\n            var radioValue = $(\"input[name='tipo']:checked\").val();\r\n            if (radioValue === \"carta\") mainview.selezionatoCarta();\r\n            else if (radioValue === \"conto\") mainview.selezionatoConto();\r\n\r\n        });\r\n\r\n        if ($(\"#carta-credito\").prop('checked')) {\r\n            $(\"#numeroOiban\").blur(function () {\r\n                if ($(\"#numeroOiban\").val() != \"\") {\r\n                    if (/^[0-9]{8}$/.test($(\"#numeroOiban\").val())) {\r\n                        numero_carta = true;\r\n                        mainview.ripulisciCampiErrati();\r\n                        return;\r\n                    } else {\r\n                        numero_carta = false;\r\n                        mainview.campiErrati();\r\n                        $(\"#numeroOiban\").css(\"borderColor\", \"red\");\r\n\r\n                        $(\"#numeroOiban\").on(\"click\", function () {\r\n                            $(\"#numeroOiban\").css(\"borderColor\", \"\");\r\n\r\n                        });\r\n                    }\r\n                }\r\n                numero_carta = true;\r\n            });\r\n        }else{\r\n            console.log(\"Ciao\");\r\n        }\r\n\r\n        /*Due control, la prima \"getMetodi\" recupera e conserva tutte le informarzioni relative ai\r\n            metodi di pagamento. La seconda \"getID\" salva nella variabile maincontrol.selected l'ID\r\n            del metodo che è stato selezionato dalla listgroup.\r\n         */\r\n        maincontrol.getMetodi();\r\n        maincontrol.getID();\r\n\r\n    })\r\n})();
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- public/javascripts/gestionecarte.js	(date 1563974876000)
+++ public/javascripts/gestionecarte.js	(date 1563985505608)
@@ -8,7 +8,10 @@
         selected: null,
     };
 
-    var numero_carta = false;
+    var numero_validato = false;
+    var iban_validato = false;
+    var radiocarta;
+    var radioconto;
 
     $("#buttonONE").on('click', function(){mainview.mostraFormNuovoMetodo()});
     $("#buttonTWO").on('click', function(e){mainview.premutoRimuovi(e)});
@@ -18,24 +21,26 @@
     $("#otherButton").on('click', function(){mainview.resetModal()});
     $("#aggiungiMetodo").on('click', function () {maincontrol.aggiungiMetodo()});
 
-
-    //Da completare
+    //Inizializzo il form del nuovo metodo per una carta
     mainview.mostraFormNuovoMetodo = function(){
         $("#carta-credito").prop('checked', true);
         mainview.selezionatoCarta();
         $("#modalForm").modal('show');
-
     };
 
     mainview.selezionatoCarta = function(){
         mainview.attivaCampi();
         $("#numConto").prop('disabled', true);
+        radiocarta = true;
+        radioconto = false;
     };
 
     mainview.selezionatoConto = function(){
         mainview.attivaCampi();
         $("#cvv").prop('disabled', true);
         $("#scadenza").prop('disabled', true);
+        radioconto = true;
+        radiocarta = false;
     };
 
     mainview.attivaCampi = function(){
@@ -246,13 +251,13 @@
 
         for(let i = 0; i < maincontrol.metodi.length; i++){
           if(!(maincontrol.metodi[i].numero_carta === numero)){
-              numero_carta = true;
+              numero_validato = true;
           }else{
-              numero_carta = false;
+              numero_validato = false;
               break;
           }
         }
-        if(numero_carta) {
+        if(numero_validato) {
             $.ajax({
                 type: "POST",
                 url: "/home/adminCards/aggiungiMetodoCarta",
@@ -281,11 +286,45 @@
 
     };
 
-    maincontrol.aggiungiBanca = function(){
+    maincontrol.aggiungiBanca = function() {
         console.log("Invio richiesta ajax aggiunta contoBancario");
         var iban = $("#numeroOiban").val();
+        for (let i = 0; i < maincontrol.metodi.length; i++) {
+            if (!(maincontrol.metodi[i].numero_iban === iban)) {
+                iban_validato = true;
+            } else {
+                iban_validato = false;
+                break;
+            }
+        }
+            if (iban_validato) {
+                $.ajax({
+                    type: "POST",
+                    data: {iban: iban},
+                    url: "/home/adminCards/aggiungiMetodoConto",
 
+                    beforeSend: function () {
+                        $("#modalForm").modal('hide');
+                        $("#modalCarte").modal('show');
+                        $("#loading").show();
+                        $("#modalText").hide();
+                    },
+                    success: function (msg) {
+                        if (msg === "DONE") {
+                            $("#loading").hide();
+                            mainview.messaggioEsitoOperazione("Operazione riuscita", "Metodo di pagamento inserito con successo.");
+                        } else if (msg === "FAULT") {
+                            $("#loading").hide();
+                            mainview.messaggioEsitoOperazione("Operazione fallita", "L'IBAN inserito non è valido.");
+                        }
+                    }
+                });
+            } else {
+                $("#modalForm").modal('hide');
+                mainview.messaggioEsitoOperazione("Operazione fallita", "Errore nei dati inseriti o metodo già esistente.");
+            }
     };
+
 
     mainview.campiErrati = function () {
         $("#alert_text").text("Per favore, ricontrollare i dati");
@@ -302,7 +341,6 @@
     $(document).ready(function () {
         $('#listaMetodi a').on('click', function (e) {
             e.preventDefault();
-            mainview.riepilogoDati();
             $(this).tab('show')
 
         });
@@ -311,32 +349,53 @@
             var radioValue = $("input[name='tipo']:checked").val();
             if (radioValue === "carta") mainview.selezionatoCarta();
             else if (radioValue === "conto") mainview.selezionatoConto();
+            console.log(radiocarta + " " + radioconto);
 
-        });
-
-        if ($("#carta-credito").prop('checked')) {
-            $("#numeroOiban").blur(function () {
-                if ($("#numeroOiban").val() != "") {
-                    if (/^[0-9]{8}$/.test($("#numeroOiban").val())) {
-                        numero_carta = true;
-                        mainview.ripulisciCampiErrati();
-                        return;
-                    } else {
-                        numero_carta = false;
-                        mainview.campiErrati();
-                        $("#numeroOiban").css("borderColor", "red");
+            if (radiocarta) {
+                $("#numeroOiban").blur(function () {
+                    if ($("#numeroOiban").val() != "") {
+                        if (/^[0-9]{8}$/.test($("#numeroOiban").val())) {
+                            numero_validato = true;
+                            mainview.ripulisciCampiErrati();
+                            return;
+                        } else {
+                            numero_validato = false;
+                            mainview.campiErrati();
+                            $("#numeroOiban").css("borderColor", "red");
 
-                        $("#numeroOiban").on("click", function () {
-                            $("#numeroOiban").css("borderColor", "");
+                            $("#numeroOiban").on("click", function () {
+                                $("#numeroOiban").css("borderColor", "");
 
-                        });
-                    }
-                }
-                numero_carta = true;
-            });
-        }else{
-            console.log("Ciao");
-        }
+                            });
+                        }
+                    }
+                    numero_validato = true;
+                });
+            }
+            else if(radioconto){
+                $("#numeroOiban").blur(function () {
+                    if ($("#numeroOiban").val() != "") {
+                        if (/^([A-Z]{2})\s*\t*[0-9]{24}$/.test($("#numeroOiban").val())) {
+                            iban_validato = true;
+                            mainview.ripulisciCampiErrati();
+                            return;
+                        } else {
+                            iban_validato = false;
+                            mainview.campiErrati();
+                            $("#numeroOiban").css("borderColor", "red");
+
+                            $("#numeroOiban").on("click", function () {
+                                $("#numeroOiban").css("borderColor", "");
+
+                            });
+                        }
+                    }
+                    iban_validato = true;
+                });
+            }
+        });
+
+
 
         /*Due control, la prima "getMetodi" recupera e conserva tutte le informarzioni relative ai
             metodi di pagamento. La seconda "getID" salva nella variabile maincontrol.selected l'ID
Index: routes/gestioneMetodiRoute.js
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>const express = require('express');\r\nconst router = express.Router();\r\nconst Metodi = require('../controllers/metodi');\r\n\r\nconst metodi = new Metodi();\r\n\r\n//Restituisce la pagina di index\r\nrouter.get('/', (req, res, next) =>{\r\n    let user = req.session.user;\r\n    if(!user) {\r\n        res.render('index', {title: 'MoneyGO'});\r\n    }\r\n});\r\n\r\nrouter.get('/ricavaMetodi', (req,res,next)=>{\r\n    let user = req.session.user;\r\n    let nickname = user.nickname;\r\n    metodi.recuperaMetodi(nickname, function (result) {\r\n        if(result){\r\n            req.session.metodi = result;\r\n            res.send(req.session.metodi);\r\n        }\r\n        else console.log(\"Errore recupero metodi\");\r\n    })\r\n});\r\n\r\nrouter.get('/ricavaCarte', (req,res,next)=>{\r\n    let user = req.session.user;\r\n    let nickname = user.nickname;\r\n    metodi.recuperaDatiCarte(nickname, function (result) {\r\n        if(result){\r\n            req.session.metodi = result;\r\n            res.send(req.session.metodi);\r\n        }\r\n        else console.log(\"Errore recupero carte\");\r\n    })\r\n});\r\n\r\nrouter.get('ricavaBanche', (req,res,next)=>{\r\n    let user = req.session.user;\r\n    let nickname = user.nickname;\r\n    metodi.recuperaDatiBanca(nickname, function (result) {\r\n        if(result){\r\n            req.session.metodi = result;\r\n            res.send(req.session.metodi);\r\n        }\r\n        else console.log(\"Errore recupero carte\");\r\n    })\r\n});\r\n\r\nrouter.post('/impostaPredefinito', (req,res,next)=>{\r\n    let id = req.body.id;\r\n    metodi.impostaPredefinito(id, function (result) {\r\n        if(result) res.send(\"DONE\");\r\n        else res.send(\"ERROR\");\r\n    })\r\n});\r\n\r\nrouter.post('/rimuoviMetodo', (req,res,next)=>{\r\n    let id = req.body.id;\r\n    metodi.rimuoviMetodo(id, function (result) {\r\n        if(result) res.send(\"DONE\");\r\n        else res.send(\"ERROR\");\r\n    })\r\n});\r\n\r\nrouter.post('/aggiungiMetodoCarta', (req, res, next) =>{\r\n   let dati = req.body;\r\n   metodi.aggiungiMetodoCarta(dati, function (result) {\r\n       console.log(result);\r\n       if(result){\r\n           res.send(\"DONE\");\r\n           res.end;\r\n       }else{\r\n           res.send(\"FAULT\");\r\n           res.end;\r\n       }\r\n   })\r\n});\r\nmodule.exports = router;
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- routes/gestioneMetodiRoute.js	(date 1563974876000)
+++ routes/gestioneMetodiRoute.js	(date 1563976763586)
@@ -77,4 +77,18 @@
        }
    })
 });
+
+router.post('/aggiungiMetodoConto', (req, res, next) =>{
+    let iban = req.body;
+    metodi.aggiungiMetodoConto(iban, function (result) {
+        if(result){
+            res.send("DONE");
+            res.end;
+        }else{
+            res.send("FAULT");
+            res.end;
+        }
+    })
+});
+
 module.exports = router;
\ No newline at end of file
Index: controllers/metodi.js
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>const pool = require('./connessionedb');\r\n\r\nfunction Metodi() {}\r\n\r\nMetodi.prototype = {\r\n\r\n    recuperaMetodi : function (user, callback) {\r\n        let sql = \"SELECT * FROM metodi_pagamento mp WHERE mp.ref_nickname = ? ORDER BY mp.numero_iban\";\r\n        pool.query(sql, user, function (err, result) {\r\n            if(err) throw err;\r\n            callback(result);\r\n        })\r\n    },\r\n\r\n    recuperaDatiCarte : function(user, callback){\r\n      let sql = \"SELECT c.numero_carta, c.saldo_carta, c.tipo_carta \" +\r\n                \"FROM carta c, metodi_pagamento mp \" +\r\n                \"WHERE c.ref_nickname = ? AND mp.ref_nickname = c.ref_nickname AND mp.numero_carta = c.numero_carta\";\r\n      pool.query(sql, user, function (err, result) {\r\n          if(err) throw err;\r\n          callback(result);\r\n      })\r\n    },\r\n\r\n    recuperaDatiBanca : function(user, callback){\r\n        let sql = \"SELECT c.numero_conto, c.banca, c.saldo_banca \" +\r\n                    \"FROM conto_bancario c, metodi_pagamento mp \" +\r\n                    \"WHERE c.ref_nickname = ? AND mp.ref_nickname = c.ref_nickname AND mp.numero_iban = c.IBAN\";\r\n        pool.query(sql, user, function (err, result) {\r\n            if(err) throw err;\r\n            callback(result);\r\n        })\r\n\r\n    },\r\n\r\n    impostaPredefinito : function(id, callback){\r\n\r\n        let sql = \"UPDATE metodi_pagamento SET predefinito = '0' WHERE predefinito = '1'\";\r\n        let sqlTWO = \"UPDATE metodi_pagamento SET predefinito = '1' WHERE id_metodo = ?\";\r\n\r\n\r\n        pool.query(sql, function (err, result) {\r\n            if(err) throw err;\r\n            pool.query(sqlTWO,id,(function (err,result) {\r\n                if(err) throw err;\r\n                callback(result);\r\n            }))\r\n        })\r\n\r\n    },\r\n\r\n    rimuoviMetodo : function(id, callback){\r\n      let sql = \"DELETE FROM metodi_pagamento WHERE id_metodo = ?\";\r\n\r\n      pool.query(sql, id, function (err, result) {\r\n          if(err) throw err;\r\n          callback(result);\r\n      })\r\n    },\r\n\r\n    //DA COMPLETARE! Gnoffo -- res ritorna l'objext res.ref_nickname no..\r\n    aggiungiMetodoCarta : function (dati, callback) {\r\n        this.verificaCarta(dati, function (res) {\r\n            console.log(res);\r\n            if(res){\r\n                let sql = \"INSERT INTO metodi_pagamento(ref_nickname, tipo, saldo_metodo, numero_carta) VALUES(?, ?, ?, ?)\";\r\n                pool.query(sql, [res[0].ref_nickname, '1', res[0].saldo_carta, res[0].numero_carta], function (err, result) {\r\n                    if(err) throw err;\r\n                    callback(result);\r\n                })\r\n            }else\r\n                callback(null);\r\n        })\r\n    },\r\n\r\n    verificaCarta : function(dati, callback){\r\n        let sql = \"SELECT * FROM carta WHERE numero_carta = ? AND cvv = ?\";\r\n        pool.query(sql, [dati.numero, dati.cvv] , function (err, result) {\r\n            if(err) throw err;\r\n            if(result.length > 0)\r\n                callback(result);\r\n            else\r\n                callback(null);\r\n        })\r\n    },\r\n\r\n    verificaConto : function(user, callback){\r\n\r\n    },\r\n\r\n\r\n\r\n\r\n};\r\n\r\nmodule.exports = Metodi;\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- controllers/metodi.js	(date 1563974876000)
+++ controllers/metodi.js	(date 1563976240693)
@@ -58,7 +58,6 @@
       })
     },
 
-    //DA COMPLETARE! Gnoffo -- res ritorna l'objext res.ref_nickname no..
     aggiungiMetodoCarta : function (dati, callback) {
         this.verificaCarta(dati, function (res) {
             console.log(res);
@@ -84,8 +83,27 @@
         })
     },
 
-    verificaConto : function(user, callback){
-
+    aggiungiMetodoConto : function(dati, callback){
+        this.verificaConto(dati, function (res) {
+            if(res){
+                let sql = "INSERT INTO metodi_pagamento(ref_nickname, saldo_metodo, numero_iban, tipo) VALUES(?,?,?,?)";
+                pool.query(sql, [res[0].ref_nickname, res[0].saldo_banca, res[0].iban, '0'], function (err, result) {
+                    if(err) throw err;
+                    callback(result);
+                })
+            }
+        })
+    },
+
+    verificaConto : function(iban, callback){
+        let sql = "SELECT * FROM conto_bancario WHERE iban = ?";
+        pool.query(sql, iban, function (err, result) {
+            if(err) throw err;
+            if(result.length > 0)
+                callback(result);
+            else
+                callback(null);
+        })
     },
 
 
